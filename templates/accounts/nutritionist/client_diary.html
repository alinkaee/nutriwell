{% extends 'accounts/base_dashboard.html' %}

{% block title %}Дневник питания клиента — Чистый Баланс{% endblock %}

{% block content %}
<h2><i class="bi bi-journal-text me-2"></i>Дневник питания клиента</h2>

<div class="alert alert-info">
  <strong>Клиент:</strong> {{ client.user.get_full_name|default:client.user.email }}<br>
  <strong>Цель:</strong> {{ program.target_calories }} ккал / день
</div>

<!-- Список записей -->
<div class="row">
  {% for entry in entries %}
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <span>{{ entry.date|date:"d E Y" }} {% if entry.time %}{{ entry.time|time:"H:i" }}{% endif %}</span>
        </div>
        <div class="card-body">
          {% if entry.product %}
            <p><strong>Продукт:</strong> {{ entry.product.name }}</p>
          {% elif entry.food_description %}
            <p><strong>Описание:</strong> {{ entry.food_description }}</p>
          {% endif %}
          {% if entry.calories or entry.protein or entry.fat or entry.carbs %}
            <hr>
            <div class="row">
              {% if entry.calories %}
                <div class="col-3"><strong>Ккал:</strong> {{ entry.calories }} ккал</div>
              {% endif %}
              {% if entry.protein %}
                <div class="col-3"><strong>Белки:</strong> {{ entry.protein }} г</div>
              {% endif %}
              {% if entry.fat %}
                <div class="col-3"><strong>Жиры:</strong> {{ entry.fat }} г</div>
              {% endif %}
              {% if entry.carbs %}
                <div class="col-3"><strong>Углеводы:</strong> {{ entry.carbs }} г</div>
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12">
      <p class="text-muted">Нет записей в дневнике.</p>
    </div>
  {% endfor %}
</div>

{% endblock %}